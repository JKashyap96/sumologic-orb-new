description: |
    "Add this job to your workflow with no require statements. This job will run in parallel with the rest of your workflow for monitoring and will exit when all other jobs have completed."
executor: default
parameters:
    circle-token:
        default: CIRCLE_TOKEN
        description: 'Enter your CircleCI Personal Access Token for interacting with the API. You may generate one here: https://circleci.com/account/api'
        type: env_var_name
    custom-data:
        default: ""
        description: A valid JSON object to append to the workflow data.
        type: string
    job-collector:
        default: JOB_HTTP_SOURCE
        description: Enter the HTTP Source endpoint generated by the Sumologic setup wizard for Jobs.
        type: env_var_name
    workflow-collector:
        default: WORKFLOW_HTTP_SOURCE
        description: Enter the HTTP Source endpoint generated by the Sumologic setup wizard for Workflows.
        type: env_var_name
steps:
    - jq/install
    - run:
        name: Workflow Collector
        environment:
          PARAM_CUSTOMDATA: <<parameters.custom-data>>
          PARAM_JOBCOLLECTOR: <<parameters.job-collector>>
          PARAM_CIRCLETOKEN: <<parameters.circle-token>>
          PARAM_WORKFLOWCOLLECTOR: <<parameters.workflow-collector>>
        command: <<include(scripts/workflow-collector.sh)>>
